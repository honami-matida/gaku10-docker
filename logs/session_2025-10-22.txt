==========================================
ãƒ­ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æè¨˜éŒ²
==========================================

æ—¥ä»˜ï¼š2025-10-22
ç’°å¢ƒï¼šmacOS / Docker / Rails 7 / MySQL 8
ä½œæ¥­å†…å®¹ï¼šã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ãƒ»Railsã‚µãƒ¼ãƒèµ·å‹•æ™‚ã®ãƒ­ã‚°èª¿æŸ»

------------------------------------------
1. æ“ä½œã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
------------------------------------------
[21:25:--] docker compose up -d
[21:30:--] docker compose exec web rails s
[21:35:--] ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000/public/customers/1/favorites ã«ã‚¢ã‚¯ã‚»ã‚¹
[21:38:45] ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿï¼ˆActiveRecord::RecordNotFoundï¼‰

------------------------------------------
2. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°æŠœç²‹ï¼ˆdevelopment.logã‚ˆã‚Šï¼‰
------------------------------------------
Started GET "/public/customers/11/favorites" for 151.101.1.227 at 2025-10-21 21:38:45 +0000
Cannot render console from 151.101.1.227! Allowed networks: 127.0.0.0/127.255.255.255, ::1
  Parameters: {"id"=>"11"}
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT `customers`.* FROM `customers` WHERE `customers`.`id` = 11 ORDER BY `customers`.`id` ASC LIMIT 1[0m
  â†³ app/controllers/public/customers_controller.rb:54:in `authenticate_customer!'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT `customers`.* FROM `customers` WHERE `customers`.`id` = 11 LIMIT 1[0m
  â†³ app/controllers/public/customers_controller.rb:45:in `favorites'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `favorites`.`post_id` FROM `favorites` WHERE `favorites`.`customer_id` = 11[0m
  â†³ app/controllers/public/customers_controller.rb:46:in `favorites'
  [1m[36mPost Load (0.5ms)[0m  [1m[34mSELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 11 LIMIT 1[0m
  â†³ app/controllers/public/customers_controller.rb:48:in `favorites'
Completed 404 Not Found in 15ms (ActiveRecord: 3.2ms | Allocations: 3360)
Processing by Public::CustomersController#favorites as HTML

ActiveRecord::RecordNotFound (Couldn't find Post with 'id'=11):
app/controllers/public/customers_controller.rb:48:in `favorites'

------------------------------------------
3. åŸå› ä»®èª¬
------------------------------------------
- seedã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã¦ã„ãªã„
- Public::CustomersController#favorites
  @Post = Post.find(params[:id])
  ã¨ã„ã†è¡ŒãŒæ®‹ã£ã¦ã„ã‚‹ãŸã‚ã€Rails ãŒã€Œpost.id = 11ã€ã‚’æ¢ã—ã¦ã„ã‚‹


------------------------------------------
4. å¯¾å¿œå†…å®¹
------------------------------------------
1. rails db:seed å®Ÿè¡Œ
2. Public::CustomersController#favorites
  @Post = Post.find(params[:id])ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
3. docker compose exec web rails routes | grep favorites
ã€€ã€€ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã›ãšã«ç¢ºèª
4. ãƒ«ãƒ¼ãƒˆãŒ/public/customers/:id/favoritesã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
5. http://localhost:3000/public/customers/1/favorites
ã€€ã€€ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ç¢ºèª
6.2ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å‰Šé™¤

------------------------------------------
5. çµæœ
------------------------------------------
å®Ÿè¡Œçµæœï¼šæ­£å¸¸ã«èµ·å‹•
ç¢ºèªå†…å®¹ï¼šã„ã„ã­ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
å†ç™ºé˜²æ­¢ï¼šãƒ»rails routes ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã™ã‚‹ç¿’æ…£ã¥ã‘
ã€€ã€€ã€€ã€€ã€€ãƒ»ãƒ†ã‚¹ãƒˆã«è¿½è¨˜ã™ã‚‹
------------------------------------------
6. ãƒ¡ãƒ¢ãƒ»æ°—ã¥ã
------------------------------------------
- /customers/11/favorites ã® 11 ã¯ã€ŒCustomerã®idã€
- /posts/5/favorites ã® 5 ã¯ã€ŒPostã®idã€
- params[:id] ã¨ params[:post_id]
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«logsã«è¨˜éŒ²ã™ã‚‹ã“ã¨ã§ã€ã‚ã¨ã‹ã‚‰å‚ç…§å¯èƒ½&å†ç™ºé˜²æ­¢
- development.logã§ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç¢ºèªã§ãã‚‹

------------------------------------------
7. å‚è€ƒURL
------------------------------------------